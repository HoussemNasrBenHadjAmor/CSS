@model IEnumerable<HRManagement.Models.Employee>

<h2>Employees By Department</h2>

@{
    var currentPage = (int)(ViewBag.Page ?? 1);
    var totalPages = (int)(ViewBag.TotalPages ?? 1);
    var departmentId = ViewBag.DepartmentId;
    var pageSize = (int)(ViewBag.PageSize ?? 25);
    var totalCount = (int)(ViewBag.TotalCount ?? 0);
    var startPage = Math.Max(1, currentPage - 2);
    var endPage = Math.Min(totalPages, currentPage + 2);
}

<table class="table">
    <thead>
        <tr>
            <th>Name</th>
            <th>Department</th>
            <th>Salary</th>
        </tr>
    </thead>
    <tbody>
@foreach (var item in Model)
{
    <tr>
          <td>@item.FullName</td>
          <td>@item.Department?.DepartmentName</td>
          <td>@item.BaseSalary</td>
    </tr>
}
    </tbody>
</table>

<div class="d-flex justify-content-between align-items-center">
    <div class="text-muted">
        Showing page @currentPage of @totalPages (@totalCount total employees)
    </div>

    <nav aria-label="Employees by department pagination">
        <ul class="pagination mb-0">
                 <li class="page-item @(currentPage == 1 ? "disabled" : "")">
                <a class="page-link" asp-action="ByDepartment"
                     asp-route-page="@(currentPage - 1)"
                   asp-route-pageSize="@pageSize"
                   asp-route-departmentId="@departmentId">Previous</a>
            </li>

            @for (var i = startPage; i <= endPage; i++)
            {
                <li class="page-item @(i == currentPage ? "active" : "")">
                    <a class="page-link" asp-action="ByDepartment"
                       asp-route-page="@i"
                       asp-route-pageSize="@pageSize"
                       asp-route-departmentId="@departmentId">@i</a>
                </li>
            }

            <li class="page-item @(currentPage >= totalPages ? "disabled" : "")">
                <a class="page-link" asp-action="ByDepartment"
                   asp-route-page="@(currentPage + 1)"
                   asp-route-pageSize="@pageSize"
                   asp-route-departmentId="@departmentId">Next</a>
            </li>
        </ul>
    </nav>
</div>
