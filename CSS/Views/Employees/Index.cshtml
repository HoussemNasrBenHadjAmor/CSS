@model IEnumerable<Employee>

<h2>Employees</h2>

@{
    var currentPage = (int)(ViewBag.Page ?? 1);
    var totalPages = (int)(ViewBag.TotalPages ?? 1);
    var pageSize = (int)(ViewBag.PageSize ?? 25);
    var totalCount = (int)(ViewBag.TotalCount ?? 0);
    var startPage = Math.Max(1, currentPage - 2);
    var endPage = Math.Min(totalPages, currentPage + 2);
}

<table class="table table-striped">
    <thead>
        <tr>
            <th>Name</th>
            <th>Department</th>
            <th>Salary</th>
            <th>Hire Date</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var emp in Model)
        {
            <tr>
                <td>@emp.FullName</td>
                <td>@emp.Department?.DepartmentName</td>
                <td>@emp.BaseSalary</td>
                <td>@emp.HireDate.ToShortDateString()</td>
                <td>
                    <a asp-action="IncreaseSalary" asp-route-id="@emp.Id"
                       class="btn btn-success btn-sm">
                        +10%
                    </a>
                </td>
            </tr>
        }
    </tbody>
</table>

<div class="d-flex justify-content-between align-items-center">
    <div class="text-muted">
        Showing page @currentPage of @totalPages (@totalCount total employees)
    </div>

    <nav aria-label="Employees pagination">
        <ul class="pagination mb-0">
            <li class="page-item @(currentPage == 1 ? "disabled" : "")">
                <a class="page-link" asp-action="Index"
                   asp-route-page="@(currentPage - 1)"
                   asp-route-pageSize="@pageSize">Previous</a>
            </li>

            @for (var i = startPage; i <= endPage; i++)
            {
                <li class="page-item @(i == currentPage ? "active" : "")">
                    <a class="page-link" asp-action="Index"
                       asp-route-page="@i"
                       asp-route-pageSize="@pageSize">@i</a>
                </li>
            }

            <li class="page-item @(currentPage >= totalPages ? "disabled" : "")">
                <a class="page-link" asp-action="Index"
                   asp-route-page="@(currentPage + 1)"
                   asp-route-pageSize="@pageSize">Next</a>
            </li>
        </ul>
    </nav>
</div>